---
alwaysApply: true
---


# Infrastructure Notes Reference Rule

## Automatic Infrastructure Reference

When the user asks questions or discusses topics related to their homelab infrastructure (or loosely related topics), **automatically search and reference the notes mcp** in the Homelab folder. This includes but is not limited to:

- **Hardware questions** (hosts, VMs, GPUs, storage) → Check `Hardware.md`
- **Network/IP/port questions** → Check `Networking.md` first, but also search other files
- **Service endpoints, URLs, credentials** → Check `Services.md`, `Networking.md`, and service-specific files
- **VM or container questions** → Check `Proxmox-Cluster.md`, `k3s-cluster.md`
- **Storage/NFS questions** → Check `TrueNAS.md`
- **Automation/workflow questions** → Check `Semaphore.md`
- **Media stack questions** → Check `Jellyfin-Stack.md`
- **Kubernetes/cluster questions** → Check `k3s-cluster.md`

## Search Thoroughly and Loosely

**Critical**: Infrastructure context is often scattered across multiple files that may seem unrelated. For example:
- A service's IP might be in `Networking.md`, but its configuration details are in `k3s-cluster.md`
- Hardware specs are in `Hardware.md`, but resource allocations for VMs are in `k3s-cluster.md`
- Database services are listed in `Services.md`, but storage pool details are in `TrueNAS.md`
- A service endpoint might be documented in multiple places with different levels of detail

**Always**:
1. Search broadly across ALL infrastructure files when relevant
2. Don't assume a file's theme means it won't contain relevant info
3. If initial search doesn't find what you need, search again with different terms
4. Cross-reference information from multiple files when answering
5. When in doubt, search more rather than less

## What to Expect in Infrastructure Notes

The infrastructure documentation contains:

### Hardware (`Hardware.md`)
- Proxmox host specifications (CPU, RAM, GPUs, networking)
- NAS machine hardware details
- Spare parts inventory

### Networking (`Networking.md`)
- Network topology and subnets
- All host IPs (Proxmox hosts, NAS)
- All VM IPs
- Complete service port reference tables (Portainer, databases, media stack, monitoring, K3s services)
- cAdvisor endpoints
- MetalLB IP assignments

### Services (`Services.md`)
- Portainer architecture (master/agents)
- Database services (MongoDB, PostgreSQL, Neo4j, MinIO) with storage pool info
- Additional services (Nginx Proxy Manager, Rancher, Longhorn, MeTube)
- API keys and credentials

### Proxmox Cluster (`Proxmox-Cluster.md`)
- VM inventory and purposes
- HA configuration
- Insights host details (Prometheus, Grafana, MCP servers)
- Proxmox API tokens
- Monitoring endpoints

### K3s Cluster (`k3s-cluster.md`)
- Cluster nodes (control plane, workers, storage) with specs
- Network configuration
- K3s version and authentication
- MetalLB configuration
- Rancher and Longhorn details
- GitLab installation and access details
- Service endpoints and LoadBalancer IPs

### TrueNAS (`TrueNAS.md`)
- ZFS pools and datasets
- NFS shares and mount points
- TrueNAS-specific services
- Monitoring setup

### Jellyfin Stack (`Jellyfin-Stack.md`)
- Media automation services (Radarr, Sonarr, Prowlarr, Jellyfin, Jellyseerr)
- ExpressVPN integration
- Volume mounts

### Semaphore (`Semaphore.md`)
- Automation workflows (backups, monitoring, maintenance)
- Scheduled tasks

### Other Files
- `Rayify.md` - Development repository info
- `Cloudflare SSL Certs Info.md` - SSL certificate details

### New/modifying files always occuring 

## Prompt for Documentation Updates

When the user:
- Adds a new service or endpoint
- Changes IP addresses or ports
- Adds new VMs or containers
- Modifies network configuration
- Adds new hardware
- Changes credentials or API keys
- Updates service versions

**Always prompt**: "Would you like me to update the infrastructure notes with this information? I can add it to [relevant file(s)]."

This ensures the documentation stays current and useful for future reference.